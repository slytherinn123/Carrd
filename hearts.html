<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Pop the Hearts üíñ</title>

<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: "Press Start 2P", cursive;
}

body {
  height: 100vh;
  background: radial-gradient(circle at top, #ffd6ea, #e6d9ff);
  overflow: hidden;
  position: relative;
  text-align: center;
  transition: background 0.5s;
}

/* Header */
h1 {
  margin-top: 20px;
  font-size: 1rem;
  color: #ff3d81;
  text-shadow: 0 0 10px #ffc1dc;
}

.points {
  margin-top: 10px;
  font-size: 0.65rem;
  color: #6b2cff;
}

/* Floating hearts */
.heart {
  position: absolute;
  bottom: -80px;
  animation-name: floatUp;
  animation-timing-function: linear;
  user-select: none;
  transition: opacity 1s;
}

/* Background hearts */
.bg-heart {
  font-size: 14px;
  opacity: 0.3;
}

/* Clickable hearts */
.big-heart {
  font-size: 64px;
  cursor: pointer;
  z-index: 5;
}

/* Float animation */
@keyframes floatUp {
  0% { transform: translateY(0) scale(1); opacity: 1; }
  100% { transform: translateY(-120vh) scale(1.1); opacity: 0; }
}

/* Pop animation */
.pop {
  animation: popAnim 0.4s forwards;
}

@keyframes popAnim {
  0% { transform: scale(1); }
  50% { transform: scale(1.6); }
  100% { transform: scale(0); }
}

/* Center message */
.popup-msg {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: #fff;
  padding: 18px 22px;
  border: 4px solid #ff4d8d;
  box-shadow: 0 0 25px rgba(255,77,141,0.6);
  font-size: 0.6rem;
  color: #ff2d95;
  z-index: 20;
}

/* Win message */
.win-message {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: #fff;
  padding: 26px 30px;
  border: 5px solid #ff2d95;
  box-shadow: 0 0 30px rgba(255,45,149,0.7);
  font-size: 0.75rem;
  display: none;
  z-index: 30;
}

/* Buttons */
.back-btn, .next-btn {
  position: fixed;
  bottom: 20px;
  padding: 10px 14px;
  font-size: 0.55rem;
  background: #fff;
  border: 3px solid #000;
  box-shadow: inset -3px -3px 0 #999;
  cursor: pointer;
}

.back-btn { left: 20px; }
.next-btn { right: 20px; display: none; }

/* Confetti shapes */
.confetti {
  position: fixed;
  pointer-events: none;
}
</style>
</head>

<body>

<h1>POP THE HEARTS üíñ</h1>
<div class="points" id="pointsDisplay">POINTS: 0 / 5</div>

<button class="back-btn" onclick="location.href='games.html'">‚Üê BACK</button>
<button class="next-btn" id="nextBtn" onclick="location.href='spotify.html'">NEXT ‚Üí</button>

<div class="win-message" id="winMessage">
  üéâ YOU WON üíï<br><br>
  LOVE LEVEL: MAX
</div>

<script>
const totalPoints = 5;
let points = 0;

const pointsDisplay = document.getElementById("pointsDisplay");
const winMessage = document.getElementById("winMessage");
const nextBtn = document.getElementById("nextBtn");

const reactions = [
  "SO CUTE üíó",
  "LOVE +1 üíï",
  "ADORABLE üò≠",
  "OMG YES üíò",
  "HEART UNLOCKED üíñ"
];

/* Background hearts */
setInterval(() => {
  const bg = document.createElement("div");
  bg.className = "heart bg-heart";
  bg.innerText = "üíñ";
  bg.style.left = Math.random() * 100 + "vw";
  bg.style.fontSize = 10 + Math.random() * 20 + "px";
  bg.style.animationDuration = 8 + Math.random() * 8 + "s";
  document.body.appendChild(bg);
  setTimeout(() => bg.remove(), 16000);
}, 200);

/* Main heart spawner */
const heartInterval = setInterval(() => {
  if (points >= totalPoints) return;

  const heart = document.createElement("div");
  heart.className = "heart big-heart";
  heart.innerText = "‚ù§Ô∏è";
  heart.style.left = Math.random() * (window.innerWidth - 80) + "px";
  heart.style.animationDuration = 6 + Math.random() * 4 + "s";

  document.body.appendChild(heart);

  heart.addEventListener("click", () => {
    if (heart.classList.contains("popped")) return;

    heart.classList.add("popped", "pop");
    points++;

    pointsDisplay.innerText = `POINTS: ${points} / ${totalPoints}`;
    showReaction();

    setTimeout(() => heart.remove(), 400);

    if (points === totalPoints) {
      endGame();
    }
  });

  setTimeout(() => {
    if (document.body.contains(heart)) heart.remove();
  }, 10000);

}, 1500);

/* Reaction message */
function showReaction() {
  const msg = document.createElement("div");
  msg.className = "popup-msg";
  msg.innerText = reactions[Math.floor(Math.random() * reactions.length)];
  document.body.appendChild(msg);
  setTimeout(() => msg.remove(), 900);
}

/* End game */
function endGame() {
  clearInterval(heartInterval);

  // Fade background hearts
  document.querySelectorAll('.bg-heart').forEach(h => h.style.opacity = 0.1);

  winMessage.style.display = "block";
  nextBtn.style.display = "block";
  launchConfetti();
}

/* Full-screen confetti */
// function launchConfetti() {
//   const icons = ["üíñ","üíó","üíï","üíò"];
//   const totalConfetti = 150; // more confetti
//   for (let i = 0; i < totalConfetti; i++) {
//     const c = document.createElement("div");
//     c.className = "confetti";
//     c.innerText = icons[Math.floor(Math.random()*icons.length)];
//     c.style.left = Math.random() * window.innerWidth + "px";
//     c.style.top = Math.random() * window.innerHeight + "px";
//     c.style.fontSize = 12 + Math.random() * 20 + "px";
//     const duration = 2 + Math.random() * 2 + "s";
//     c.style.animation = `confettiFall ${duration} linear forwards`;
//     document.body.appendChild(c);
//     setTimeout(() => c.remove(), 4000);
//   }
// }
</script>

</body>
</html>
